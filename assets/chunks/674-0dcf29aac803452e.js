"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{2558:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(7294),l=n(4249);let o=()=>(0,r.useContext)(l.Vo)},8674:function(e,t,n){let r;n.d(t,{A:function(){return $}});var l=n(5893),o=n(7294),s=n(9332),i=n(7527),a=n(1163),c=n(5697),d=n.n(c),h=n(4249),p=n(7128);let x=e=>{let{children:t}=e,n=(0,a.useRouter)(),{isAuthenticated:r}=(0,h.Eu)(),l=(0,o.useRef)(!1),[s,i]=(0,o.useState)(!1),c=()=>{window.open("".concat(p.Z.apiUrl,"/cas/login/"),"_self")},d=async()=>{try{let e=await fetch("".concat(p.Z.apiUrl,"/session/"));if(e.ok){let t=await e.json();if(console.log(t),t.authenticated)return window.sessionStorage.setItem("user",JSON.stringify(t.user)),window.sessionStorage.setItem("sessionKey",t.session_key),window.sessionStorage.setItem("isNew",t.new),!0}else console.error("Failed to fetch session data:",e.statusText);return!1}catch(e){return console.error("Error fetching session data:",e),!1}};return((0,o.useEffect)(()=>{n.isReady&&!l.current&&(l.current=!0,r?i(!0):d().then(e=>{e?(window.sessionStorage.setItem("authenticated",!0),window.location.reload()):c()}))},[n.isReady]),s)?t:null};x.propTypes={children:d().node};var u=n(1664),g=n.n(u),f=n(2635),j=n(3490),m=n(6788),b=n(6912),Z=n(55),w=n(7958),y=n(8745);let C=()=>{let e=(0,y.Z)().palette.primary.main;return(0,l.jsx)("img",{alt:"Logo",src:"https://liphy-gazotheque.univ-grenoble-alpes.fr/static/images/app/logo-liphy-blanc.svg",height:"100%",width:"100%",style:{fill:e}})};var v=n(7340),k=n(3281);function S(){let e=(0,v._)([""]);return S=function(){return e},e}let z=(0,i.ZP)(k.Z)(S());var P=n(1556),I=n(6254),R=n(25),_=n(7661),E=n(1589);let F=[{title:"Tableau au bord",path:"/",icon:(0,l.jsx)(E.Z,{fontSize:"small",children:(0,l.jsx)(P.Z,{})})},{title:"Ajouter une bouteille",path:"/materials",icon:(0,l.jsx)(E.Z,{fontSize:"small",children:(0,l.jsx)(I.Z,{})})},{title:"Listes d'nventaire",path:"/liste-material",icon:(0,l.jsx)(E.Z,{fontSize:"small",children:(0,l.jsx)(_.Z,{})})},{title:"Compte",path:"/account",icon:(0,l.jsx)(E.Z,{fontSize:"small",children:(0,l.jsx)(R.Z,{})})}];var T=n(8480);let N=e=>{let{active:t=!1,disabled:n,external:r,icon:o,path:s,title:i}=e,a=s?r?{component:"a",href:s,target:"_blank"}:{component:g(),href:s}:{};return(0,l.jsx)("li",{children:(0,l.jsxs)(T.Z,{sx:{alignItems:"center",borderRadius:1,display:"flex",justifyContent:"flex-start",pl:"16px",pr:"16px",py:"6px",textAlign:"left",width:"100%",...t&&{backgroundColor:"rgba(255, 255, 255, 0.04)"},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.04)"}},...a,children:[o&&(0,l.jsx)(j.Z,{component:"span",sx:{alignItems:"center",color:"neutral.400",display:"inline-flex",justifyContent:"center",mr:2,...t&&{color:"rgb(226, 215, 171)"}},children:o}),(0,l.jsx)(j.Z,{component:"span",sx:{color:"neutral.400",flexGrow:1,fontFamily:e=>e.typography.fontFamily,fontSize:14,fontWeight:600,lineHeight:"24px",whiteSpace:"nowrap",...t&&{color:"common.white"},...n&&{color:"neutral.500"}},children:i})]})})};N.propTypes={active:d().bool,disabled:d().bool,external:d().bool,icon:d().node,path:d().string,title:d().string.isRequired};let q=e=>{let{open:t,onClose:n}=e,r=(0,s.usePathname)(),o=(0,f.Z)(e=>e.breakpoints.up("lg")),i=(0,l.jsx)(z,{sx:{height:"100%","& .simplebar-content":{height:"100%"},"& .simplebar-scrollbar:before":{background:"neutral.400"}},children:(0,l.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,l.jsxs)(j.Z,{sx:{p:3},children:[(0,l.jsx)(j.Z,{component:g(),href:"/",sx:{display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto",height:100,width:100},children:(0,l.jsx)(C,{sx:{height:"100%",width:"100%",maxHeight:"100%",maxWidth:"100%",objectFit:"contain"}})}),(0,l.jsx)(j.Z,{sx:{mt:3},children:(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Z,{color:"inherit",variant:"subtitle1",sx:{textAlign:"center",width:"100%"},children:"Gazotheque"}),(0,l.jsx)(m.Z,{color:"rgb(198, 170, 88)",variant:"body2",sx:{textAlign:"center",width:"100%"},children:"Stockage de bouteilles de gaz"})]})})]}),(0,l.jsx)(b.Z,{sx:{borderColor:"white"}}),(0,l.jsx)(j.Z,{component:"nav",sx:{flexGrow:1,px:2,py:3},children:(0,l.jsx)(Z.Z,{component:"ul",spacing:.5,sx:{listStyle:"none",p:0,m:0},children:F.map(e=>{let t=!!e.path&&r===e.path;return(0,l.jsx)(N,{active:t,disabled:e.disabled,external:e.external,icon:e.icon,path:e.path,title:e.title},e.title)})})})]})});return o?(0,l.jsx)(w.ZP,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"rgb(1, 50, 32)",color:"white",width:280}},variant:"permanent",children:i}):(0,l.jsx)(w.ZP,{anchor:"left",onClose:n,open:t,PaperProps:{sx:{backgroundColor:"rgb(1, 50, 32)",color:"white",width:280}},sx:{zIndex:e=>e.zIndex.appBar+100},variant:"temporary",children:i})};q.propTypes={onClose:d().func,open:d().bool};var O=n(2440),A=n(6875),G=n(2857),H=n(1038),L=n(9533),W=n(5895),B=n(3984);function D(){let e=(0,o.useRef)(null),[t,n]=(0,o.useState)(!1),r=(0,o.useCallback)(()=>{n(!0)},[]);return{anchorRef:e,handleClose:(0,o.useCallback)(()=>{n(!1)},[]),handleOpen:r,handleToggle:(0,o.useCallback)(()=>{n(e=>!e)},[]),open:t}}var U=n(1423),J=n(5059),K=n(923),V=n(2558);let M=e=>{let{anchorEl:t,onClose:n,open:r}=e;(0,s.useRouter)();let i=(0,V.a)(),a=i.user,c=(0,o.useCallback)(()=>{null==n||n(),i.signOut()},[n,i]);return(0,l.jsxs)(U.ZP,{anchorEl:t,anchorOrigin:{horizontal:"left",vertical:"bottom"},onClose:n,open:r,PaperProps:{sx:{width:200}},children:[a?(0,l.jsxs)(j.Z,{sx:{py:1.5,px:2},children:[(0,l.jsx)(m.Z,{variant:"overline",children:"Compte"}),(0,l.jsxs)(m.Z,{color:"text.secondary",variant:"body2",children:[a.first_name," ",a.last_name]}),(0,l.jsx)(m.Z,{color:"text.secondary",variant:"caption",children:a.role})]}):null,(0,l.jsx)(b.Z,{}),(0,l.jsx)(J.Z,{disablePadding:!0,dense:!0,sx:{p:"8px","& > *":{borderRadius:1}},children:(0,l.jsx)(K.Z,{onClick:c,children:"Se d\xe9connecter"})})]})};M.propTypes={anchorEl:d().any,onClose:d().func,open:d().bool.isRequired};let Q=e=>{let{onNavOpen:t}=e,n=(0,f.Z)(e=>e.breakpoints.up("lg")),r=D();D();let o=(0,V.a)().user.profil_pic,s=o?"".concat("https://liphy-gazotheque.univ-grenoble-alpes.fr/static/","/").concat(o[0]):"";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.Z,{component:"header",sx:{backdropFilter:"blur(6px)",backgroundColor:e=>(0,B.Fq)(e.palette.background.default,.8),position:"sticky",left:{lg:"".concat(280,"px")},top:0,width:{lg:"calc(100% - ".concat(280,"px)")},zIndex:e=>e.zIndex.appBar},children:(0,l.jsxs)(Z.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{minHeight:64,px:2},children:[(0,l.jsx)(Z.Z,{alignItems:"center",direction:"row",spacing:2,children:!n&&(0,l.jsx)(G.Z,{onClick:t,children:(0,l.jsx)(E.Z,{fontSize:"small",children:(0,l.jsx)(A.Z,{})})})}),(0,l.jsxs)(Z.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,l.jsx)(H.Z,{title:"Notifications",children:(0,l.jsx)(G.Z,{children:(0,l.jsx)(L.Z,{badgeContent:4,color:"success",variant:"dot",children:(0,l.jsx)(E.Z,{fontSize:"small",children:(0,l.jsx)(O.Z,{})})})})}),(0,l.jsx)(W.Z,{onClick:r.handleOpen,ref:r.anchorRef,sx:{cursor:"pointer",height:40,width:40},src:s})]})]})}),(0,l.jsx)(M,{anchorEl:r.anchorRef.current,open:r.open,onClose:r.handleClose})]})};Q.propTypes={onNavOpen:d().func};let X=(0,i.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flex:"1 1 auto",maxWidth:"100%",[t.breakpoints.up("lg")]:{paddingLeft:280}}}),Y=(0,i.ZP)("div")({display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"}),$=(r=e=>{let{children:t}=e,n=(0,s.usePathname)(),[r,i]=(0,o.useState)(!1),a=(0,o.useCallback)(()=>{r&&i(!1)},[r]);return(0,o.useEffect)(()=>{a()},[n]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q,{onNavOpen:()=>i(!0)}),(0,l.jsx)(q,{onClose:()=>i(!1),open:r}),(0,l.jsx)(X,{children:(0,l.jsx)(Y,{children:t})})]})},e=>(0,l.jsx)(x,{children:(0,l.jsx)(r,{...e})}))}}]);