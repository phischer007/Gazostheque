(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4881)}])},4881:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return U}});var i=r(5893),s=r(9008),t=r.n(s),c=r(7128),o=r(5678),l=r(2558),a=r(7294),d=r(3490),u=r(8426),h=r(4277),x=r(8196),j=r(2365),p=r(110),Z=r(5858),m=r(55),g=r(5895),f=r(6788),y=r(6727),w=r(4677),v=r(3950),b=r(8674),C=r(5697),I=r.n(C),_=r(2585),k=r(7634),E=r(1549),S=r(762),N=r(1919),z=r(1589);let A=e=>{let{difference:n,positive:r=!1,sx:s,value:t}=e,[o,l]=(0,a.useState)({LIPhy:0,IGE:0}),[d,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(c.Z.apiUrl,"/materials/count-by-lab"));if(e.ok){let n=await e.json();l(n)}}catch(e){console.error("Error fetching materials by lab:",e)}finally{u(!1)}})()},[]),d)?(0,i.jsx)(f.Z,{children:"Loading..."}):(0,i.jsx)(S.Z,{sx:s,children:(0,i.jsxs)(N.Z,{children:[(0,i.jsxs)(m.Z,{alignItems:"flex-start",direction:"row",justifyContent:"space-between",spacing:3,children:[(0,i.jsxs)(m.Z,{spacing:1,children:[(0,i.jsx)(f.Z,{color:"text.secondary",variant:"overline",children:"Nombre total de bouteilles par laboratoire"}),(0,i.jsxs)(m.Z,{direction:"row",spacing:4,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{variant:"subtitle1",children:"LIPhy"}),(0,i.jsx)(f.Z,{variant:"h4",children:o.LIPhy})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{variant:"subtitle1",children:"IGE"}),(0,i.jsx)(f.Z,{variant:"h4",children:o.IGE})]})]})]}),(0,i.jsx)(g.Z,{sx:{backgroundColor:"info.main",height:56,width:56},children:(0,i.jsx)(z.Z,{children:(0,i.jsx)(E.Z,{})})})]}),n&&(0,i.jsxs)(m.Z,{alignItems:"center",direction:"row",spacing:2,sx:{mt:2},children:[(0,i.jsxs)(m.Z,{alignItems:"center",direction:"row",spacing:.5,children:[(0,i.jsx)(z.Z,{color:r?"success":"error",fontSize:"small",children:r?(0,i.jsx)(k.Z,{}):(0,i.jsx)(_.Z,{})}),(0,i.jsxs)(f.Z,{color:r?"success.main":"error.main",variant:"body2",children:[n,"%"]})]}),(0,i.jsx)(f.Z,{color:"text.secondary",variant:"caption",children:"Since last month"})]})]})})};A.propTypes={difference:I().number,positive:I().bool,value:I().string,sx:I().object};let P=()=>{let e=(0,l.a)(),n=e.user,[r,s]=(0,a.useState)(!1),[b,C]=(0,a.useState)("user"),I=(0,a.useCallback)(async()=>{try{let r=await fetch("".concat(c.Z.apiUrl,"/users/").concat(n.user_id,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:b})});if(r.ok){let n=await r.json();await e.updateUser(n.user_id),o.Am.success("Your account was successfully updated!"),window.location.reload()}else o.Am.error("An error occurred. Please try again later.",{autoClose:!1});window.sessionStorage.setItem("isNew",!1),s(!1)}catch(e){console.error("An unexpected error occurred:",e),o.Am.error("An unexpected error occurred. Please try again later.",{autoClose:!1})}},[b,e,n.user_id]),_={bgcolor:"primary.main",cursor:"pointer"};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t(),{children:(0,i.jsx)("title",{children:"Tableau au bord | Gazotheque"})}),(0,i.jsx)(d.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,i.jsxs)(u.Z,{maxWidth:"xl",children:[(0,i.jsx)(h.Z,{container:!0,spacing:3,direction:"column",children:(0,i.jsx)(h.Z,{container:!0,spacing:3,lg:12,direction:"column",children:(0,i.jsx)(h.Z,{container:!0,spacing:3,lg:12,direction:"column",children:(0,i.jsx)(A,{})})})}),r&&(0,i.jsxs)(x.Z,{open:r,onClose:()=>s(!1),disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[(0,i.jsx)(j.Z,{children:"Bienvenue \xe0 Gazotheque"}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(Z.Z,{children:"Veuillez choisir le type de compte que vous souhaitez"}),(0,i.jsxs)(h.Z,{container:!0,spacing:2,xs:12,sx:{my:2},justifyContent:"center",alignItems:"flex-start",children:[(0,i.jsx)(h.Z,{item:!0,xs:5,children:(0,i.jsxs)(m.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:1,sx:{height:"100%"},children:[(0,i.jsx)(g.Z,{variant:"rounded",onClick:()=>{C("user"),console.log("USER")},sx:"user"===b?{..._}:{cursor:"pointer"},children:(0,i.jsx)(v.Z,{style:{fontSize:100}})}),(0,i.jsx)(f.Z,{align:"center",children:"User"}),(0,i.jsx)(f.Z,{align:"center",variant:"caption",children:"Un simple utilisateur peut voir l'inventaire."})]})}),(0,i.jsx)(h.Z,{item:!0,xs:5,children:(0,i.jsxs)(m.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:1,sx:{height:"100%"},children:[(0,i.jsx)(g.Z,{variant:"rounded",onClick:()=>{C("owner"),console.log("OWNER")},sx:"owner"===b?{..._}:{cursor:"pointer"},children:(0,i.jsx)(v.Z,{style:{fontSize:100}})}),(0,i.jsx)(f.Z,{align:"center",children:"owner"}),(0,i.jsx)(f.Z,{align:"center",variant:"caption",children:"Les chefs d'\xe9quipe peuvent consulter et modifier l'inventaire des bouteilles de gaz."})]})}),(0,i.jsx)(h.Z,{item:!0,xs:5,children:(0,i.jsxs)(m.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:1,sx:{height:"100%"},children:[(0,i.jsx)(g.Z,{variant:"rounded",onClick:()=>{C("admin"),console.log("ADMIN")},sx:"admin"===b?{..._}:{cursor:"pointer"},children:(0,i.jsx)(v.Z,{style:{fontSize:100}})}),(0,i.jsx)(f.Z,{align:"center",children:"Administrateur"}),(0,i.jsx)(f.Z,{align:"center",variant:"caption",children:"Un administrateur peut modifier le mat\xe9riel, d\xe9finir l'emplacement et g\xe9n\xe9rer un code QR."})]})})]})]}),(0,i.jsx)(y.Z,{children:(0,i.jsx)(w.Z,{onClick:I,color:"error",children:"V\xe9rifier"})})]})]})})]})};P.getLayout=e=>(0,i.jsx)(b.A,{children:e});var U=P}},function(e){e.O(0,[103,734,664,151,277,637,951,674,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);